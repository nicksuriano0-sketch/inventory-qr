{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2 class="mb-3">My Stock</h2>
  <a class="btn btn-primary mb-3" href="{{ url_for('add_item') }}">Add New Fitting</a>

  {% if fittings %}
  <table class="table table-striped table-bordered align-middle">
    <thead class="table-light">
      <tr>
        <th>Name</th>
        <th>Category</th>
        <th>Quantity</th>
        <th>QR Code</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for f in fittings %}
      <tr>
        <td>{{ f.name }}</td>
        <td>{{ f.category }}</td>
        <td>
          <span class="badge bg-secondary">{{ f.quantity }}</span>
        </td>
        <td>
          {% if f.qr_code %}
          <img src="data:image/png;base64,{{ f.qr_code }}" alt="QR Code" width="80">
          {% else %}
          <span class="text-muted">No QR</span>
          {% endif %}
        </td>
        <td>
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('scan', item_name=f.name) }}">View / Adjust</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div class="alert alert-info">No fittings found.</div>
  {% endif %}
</div>
{% endblock %}
