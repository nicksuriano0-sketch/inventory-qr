{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Inventory</h2>
    <a class="btn btn-primary" href="{{ url_for('add_item') }}">Add New Fitting</a>
  </div>

  {% if fittings %}
  <table class="table table-striped table-bordered align-middle text-center">
    <thead class="table-dark">
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Category</th>
        <th scope="col">Quantity</th>
        <th scope="col">QR Code</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for f in fittings %}
      <tr>
        <td>{{ f.name }}</td>
        <td>{{ f.category }}</td>
        <td><span class="badge bg-info fs-6">{{ f.quantity }}</span></td>
        <td>
          {% if f.qr_code %}
            <img src="data:image/png;base64,{{ f.qr_code }}" alt="QR" width="80" class="border rounded">
          {% else %}
            <span class="text-muted">No QR</span>
          {% endif %}
        </td>
        <td>
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('scan', name=f.name) }}">View / Adjust</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div class="alert alert-warning text-center mt-4">
    No items in inventory yet. <a href="{{ url_for('add_item') }}" class="alert-link">Add your first fitting</a>.
  </div>
  {% endif %}
</div>
{% endblock %}
